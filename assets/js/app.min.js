import{validate,modal}from"./validate.js";import{SetQuestion}from"./bd.js";import{getAuthFormHTML,getAuthWithEmailAndPassword}from"./auth.js";const form=document.querySelector(".add-question"),input=document.querySelector(".inputText"),btn=document.querySelector(".add-question__btn"),btnModal=document.querySelector(".modal__btn");function openModal(){modal("Авторизация для админа",getAuthFormHTML()),document.querySelector(".popup__form").addEventListener("submit",getAuthForm)}function getAuthForm(t){t.preventDefault();var e=t.target.querySelector(".popup__email").value,n=t.target.querySelector(".popup__password").value;const o=t.target.querySelector(".popup__btn");getAuthWithEmailAndPassword(e,n).then(SetQuestion.fetchQuestion).then(renderQuestionList).then(()=>o.disabled=!0)}function renderQuestionList(t){"string"==typeof t?modal("Авторизация для админа",t):modal("Все вопросы",SetQuestion.listToHTML(t))}btnModal.addEventListener("click",openModal),input.addEventListener("input",t=>{btn.disabled=!validate(input.value)}),window.addEventListener("load",()=>{SetQuestion.renderQuestion()}),form.addEventListener("submit",t=>{t.preventDefault(),validate(input.value)&&(t={text:input.value.trim(),date:(new Date).toJSON()},btn.disabled=!0,SetQuestion.create(t).then(()=>{input.value="",btn.disabled=!0}))});